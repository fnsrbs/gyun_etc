<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 급식 정보</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        h1 { color: #333; }
        #meals { margin-top: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; display: inline-block; text-align: left; }
    </style>
</head>
<body>
    <div id="meals">불러오는 중...</div>

    <script>
        function getToday() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, "0");
            const day = String(today.getDate()).padStart(2, "0");
            return `${year}${month}${day}`;
        }

        const today = getToday();

        const API_KEY = "25ab112985ae4d408a9ff59278a983ad";
        const ATPT_OFCDC_SC_CODE = "J10";  
        const SD_SCHUL_CODE = "7530102";  

        const url = `https://open.neis.go.kr/hub/mealServiceDietInfo?KEY=${API_KEY}&Type=json&ATPT_OFCDC_SC_CODE=${ATPT_OFCDC_SC_CODE}&SD_SCHUL_CODE=${SD_SCHUL_CODE}&MLSV_YMD=${today}`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const mealDiv = document.getElementById("meals");
                try {
                    let meals = data["mealServiceDietInfo"][1]["row"];
                    let htmlContent = `<h2>${today} 급식 정보</h2><hr>`;
                    meals.forEach(meal => {
                        htmlContent += `<h3>${meal["MMEAL_SC_NM"]}</h3>`;
                        htmlContent += `<p>${meal["DDISH_NM"].replace(/<br\/>/g, "<br>")}</p><hr>`;
                    });
                    mealDiv.innerHTML = htmlContent;
                } catch (error) {
                    mealDiv.innerHTML = `<h2>${today} 급식 정보가 없습니다.</h2>`;
                }
            })
            .catch(error => {
                document.getElementById("meals").innerHTML = `<h2>급식 정보를 불러오는 중 오류가 발생했습니다.</h2>`;
            });
    </script>
</body>
</html>
